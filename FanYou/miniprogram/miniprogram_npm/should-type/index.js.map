{"version":3,"sources":["should-type.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\n\nvar types = {\n  NUMBER: 'number',\n  UNDEFINED: 'undefined',\n  STRING: 'string',\n  BOOLEAN: 'boolean',\n  OBJECT: 'object',\n  FUNCTION: 'function',\n  NULL: 'null',\n  ARRAY: 'array',\n  REGEXP: 'regexp',\n  DATE: 'date',\n  ERROR: 'error',\n  ARGUMENTS: 'arguments',\n  SYMBOL: 'symbol',\n  ARRAY_BUFFER: 'array-buffer',\n  TYPED_ARRAY: 'typed-array',\n  DATA_VIEW: 'data-view',\n  MAP: 'map',\n  SET: 'set',\n  WEAK_SET: 'weak-set',\n  WEAK_MAP: 'weak-map',\n  PROMISE: 'promise',\n\n// node buffer\n  BUFFER: 'buffer',\n\n// dom html element\n  HTML_ELEMENT: 'html-element',\n  HTML_ELEMENT_TEXT: 'html-element-text',\n  DOCUMENT: 'document',\n  WINDOW: 'window',\n  FILE: 'file',\n  FILE_LIST: 'file-list',\n  BLOB: 'blob',\n\n  HOST: 'host',\n\n  XHR: 'xhr',\n\n  // simd\n  SIMD: 'simd'\n};\n\n/*\n * Simple data function to store type information\n * @param {string} type Usually what is returned from typeof\n * @param {string} cls  Sanitized @Class via Object.prototype.toString\n * @param {string} sub  If type and cls the same, and need to specify somehow\n * @private\n * @example\n *\n * //for null\n * new Type('null');\n *\n * //for Date\n * new Type('object', 'date');\n *\n * //for Uint8Array\n *\n * new Type('object', 'typed-array', 'uint8');\n */\nfunction Type(type, cls, sub) {\n  if (!type) {\n    throw new Error('Type class must be initialized at least with `type` information');\n  }\n  this.type = type;\n  this.cls = cls;\n  this.sub = sub;\n}\n\nType.prototype = {\n  toString: function(sep) {\n    sep = sep || ';';\n    var str = [this.type];\n    if (this.cls) {\n      str.push(this.cls);\n    }\n    if (this.sub) {\n      str.push(this.sub);\n    }\n    return str.join(sep);\n  },\n\n  toTryTypes: function() {\n    var _types = [];\n    if (this.sub) {\n      _types.push(new Type(this.type, this.cls, this.sub));\n    }\n    if (this.cls) {\n      _types.push(new Type(this.type, this.cls));\n    }\n    _types.push(new Type(this.type));\n\n    return _types;\n  }\n};\n\nvar toString = Object.prototype.toString;\n\n\n\n/**\n * Function to store type checks\n * @private\n */\nfunction TypeChecker() {\n  this.checks = [];\n}\n\nTypeChecker.prototype = {\n  add: function(func) {\n    this.checks.push(func);\n    return this;\n  },\n\n  addBeforeFirstMatch: function(obj, func) {\n    var match = this.getFirstMatch(obj);\n    if (match) {\n      this.checks.splice(match.index, 0, func);\n    } else {\n      this.add(func);\n    }\n  },\n\n  addTypeOf: function(type, res) {\n    return this.add(function(obj, tpeOf) {\n      if (tpeOf === type) {\n        return new Type(res);\n      }\n    });\n  },\n\n  addClass: function(cls, res, sub) {\n    return this.add(function(obj, tpeOf, objCls) {\n      if (objCls === cls) {\n        return new Type(types.OBJECT, res, sub);\n      }\n    });\n  },\n\n  getFirstMatch: function(obj) {\n    var typeOf = typeof obj;\n    var cls = toString.call(obj);\n\n    for (var i = 0, l = this.checks.length; i < l; i++) {\n      var res = this.checks[i].call(this, obj, typeOf, cls);\n      if (typeof res !== 'undefined') {\n        return { result: res, func: this.checks[i], index: i };\n      }\n    }\n  },\n\n  getType: function(obj) {\n    var match = this.getFirstMatch(obj);\n    return match && match.result;\n  }\n};\n\nvar main = new TypeChecker();\n\n//TODO add iterators\n\nmain\n  .addTypeOf(types.NUMBER, types.NUMBER)\n  .addTypeOf(types.UNDEFINED, types.UNDEFINED)\n  .addTypeOf(types.STRING, types.STRING)\n  .addTypeOf(types.BOOLEAN, types.BOOLEAN)\n  .addTypeOf(types.FUNCTION, types.FUNCTION)\n  .addTypeOf(types.SYMBOL, types.SYMBOL)\n  .add(function(obj) {\n    if (obj === null) {\n      return new Type(types.NULL);\n    }\n  })\n  .addClass('[object String]', types.STRING)\n  .addClass('[object Boolean]', types.BOOLEAN)\n  .addClass('[object Number]', types.NUMBER)\n  .addClass('[object Array]', types.ARRAY)\n  .addClass('[object RegExp]', types.REGEXP)\n  .addClass('[object Error]', types.ERROR)\n  .addClass('[object Date]', types.DATE)\n  .addClass('[object Arguments]', types.ARGUMENTS)\n\n  .addClass('[object ArrayBuffer]', types.ARRAY_BUFFER)\n  .addClass('[object Int8Array]', types.TYPED_ARRAY, 'int8')\n  .addClass('[object Uint8Array]', types.TYPED_ARRAY, 'uint8')\n  .addClass('[object Uint8ClampedArray]', types.TYPED_ARRAY, 'uint8clamped')\n  .addClass('[object Int16Array]', types.TYPED_ARRAY, 'int16')\n  .addClass('[object Uint16Array]', types.TYPED_ARRAY, 'uint16')\n  .addClass('[object Int32Array]', types.TYPED_ARRAY, 'int32')\n  .addClass('[object Uint32Array]', types.TYPED_ARRAY, 'uint32')\n  .addClass('[object Float32Array]', types.TYPED_ARRAY, 'float32')\n  .addClass('[object Float64Array]', types.TYPED_ARRAY, 'float64')\n\n  .addClass('[object Bool16x8]', types.SIMD, 'bool16x8')\n  .addClass('[object Bool32x4]', types.SIMD, 'bool32x4')\n  .addClass('[object Bool8x16]', types.SIMD, 'bool8x16')\n  .addClass('[object Float32x4]', types.SIMD, 'float32x4')\n  .addClass('[object Int16x8]', types.SIMD, 'int16x8')\n  .addClass('[object Int32x4]', types.SIMD, 'int32x4')\n  .addClass('[object Int8x16]', types.SIMD, 'int8x16')\n  .addClass('[object Uint16x8]', types.SIMD, 'uint16x8')\n  .addClass('[object Uint32x4]', types.SIMD, 'uint32x4')\n  .addClass('[object Uint8x16]', types.SIMD, 'uint8x16')\n\n  .addClass('[object DataView]', types.DATA_VIEW)\n  .addClass('[object Map]', types.MAP)\n  .addClass('[object WeakMap]', types.WEAK_MAP)\n  .addClass('[object Set]', types.SET)\n  .addClass('[object WeakSet]', types.WEAK_SET)\n  .addClass('[object Promise]', types.PROMISE)\n  .addClass('[object Blob]', types.BLOB)\n  .addClass('[object File]', types.FILE)\n  .addClass('[object FileList]', types.FILE_LIST)\n  .addClass('[object XMLHttpRequest]', types.XHR)\n  .add(function(obj) {\n    if ((typeof Promise === types.FUNCTION && obj instanceof Promise) ||\n        (typeof obj.then === types.FUNCTION)) {\n          return new Type(types.OBJECT, types.PROMISE);\n        }\n  })\n  .add(function(obj) {\n    if (typeof Buffer !== 'undefined' && obj instanceof Buffer) {// eslint-disable-line no-undef\n      return new Type(types.OBJECT, types.BUFFER);\n    }\n  })\n  .add(function(obj) {\n    if (typeof Node !== 'undefined' && obj instanceof Node) {\n      return new Type(types.OBJECT, types.HTML_ELEMENT, obj.nodeName);\n    }\n  })\n  .add(function(obj) {\n    // probably at the begginging should be enough these checks\n    if (obj.Boolean === Boolean && obj.Number === Number && obj.String === String && obj.Date === Date) {\n      return new Type(types.OBJECT, types.HOST);\n    }\n  })\n  .add(function() {\n    return new Type(types.OBJECT);\n  });\n\n/**\n * Get type information of anything\n *\n * @param  {any} obj Anything that could require type information\n * @return {Type}    type info\n * @private\n */\nfunction getGlobalType(obj) {\n  return main.getType(obj);\n}\n\ngetGlobalType.checker = main;\ngetGlobalType.TypeChecker = TypeChecker;\ngetGlobalType.Type = Type;\n\nObject.keys(types).forEach(function(typeName) {\n  getGlobalType[typeName] = types[typeName];\n});\n\nmodule.exports = getGlobalType;"]}